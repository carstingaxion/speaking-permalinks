{"version":3,"file":"index.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAA4C;AACa;AAED;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAUO,MAAMM,oBAAoB,GAAGA,CAAA,KAAM;EACzC,MAAM;IAAEC,QAAQ;IAAEC,MAAM;IAAEC,4BAA4B;IAAEC;EAAS,CAAC,GACjEV,0DAAS,CAAIW,MAAM,IAAM;IACxB,MAAMC,MAAM,GAAGD,MAAM,CAAET,oDAAY,CAAC;IAEpC,IAAK,CAAEU,MAAM,EAAG;MACf,OAAO;QACNL,QAAQ,EAAE,IAAI;QACdC,MAAM,EAAE,IAAI;QACZC,4BAA4B,EAAE,KAAK;QACnCC,QAAQ,EAAE;MACX,CAAC;IACF;IAEA,MAAMG,eAAe,GAAGD,MAAM,CAACE,kBAAkB,CAAC,CAAC;IACnD,MAAMC,cAAc,GACnBJ,MAAM,CAAE,MAAO,CAAC,CAACK,WAAW,CAAEH,eAAgB,CAAC;;IAEhD;IACA,MAAMI,QAAQ,GAAGF,cAAc,EAAEE,QAAQ,IAAI,CAAC,CAAC;IAC/C,MAAMC,qBAAqB,GAC1BD,QAAQ,CAAE,qBAAqB,CAAE,GAAI,CAAC,CAAE,IAAI,KAAK;;IAElD;IACA,IAAIE,aAAa,GAAG,EAAE;IACtB,IAAKD,qBAAqB,EAAG;MAC5BC,aAAa,GAAGD,qBAAqB,CAACR,QAAQ;IAC/C;IAEA,OAAO;MACNH,QAAQ,EAAEM,eAAe;MACzBL,MAAM,EAAEI,MAAM,CAACQ,gBAAgB,CAAC,CAAC;MACjCX,4BAA4B,EAAES,qBAAqB;MACnDR,QAAQ,EAAES;IACX,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;;EAER;EACA,IAAK,CAAEV,4BAA4B,EAAG;IACrC,OAAO,IAAI;EACZ;;EAEA;EACA,IAAK,CAAEF,QAAQ,IAAI,CAAEC,MAAM,IAAI,CAAEE,QAAQ,EAAG;IAC3C,OAAO,IAAI;EACZ;EAEA,oBACCL,sDAAA,CAACF,iEAAiB;IACjBI,QAAQ,EAAGA,QAAU;IACrBC,MAAM,EAAGA,MAAQ;IACjBE,QAAQ,EAAGA;EAAU,CACrB,CAAC;AAEJ,CAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;ACrE+D;AACpB;AACS;AACI;AAKvB;AACiC;AACY;;AAE/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMP,iBAAiB,GAAGA,CAAE;EAAEI,QAAQ;EAAEC,MAAM;EAAEE;AAAS,CAAC,KAAM;EACtE;EACA,MAAMoB,SAAS,GAAGP,2DAAO,CACxB,MAAME,8EAAsB,CAAEf,QAAS,CAAC,EACxC,CAAEA,QAAQ,CACX,CAAC;;EAED;EACA,MAAM;IAAEqB,UAAU,EAAEC,gBAAgB;IAAEC,aAAa,EAAEC;EAAoB,CAAC,GACzEX,2DAAO,CAAE,MAAMG,6EAAqB,CAAEI,SAAU,CAAC,EAAE,CAAEA,SAAS,CAAG,CAAC;;EAEnE;EACA,MAAMK,eAAe,GAAGnC,0DAAS,CAC9BW,MAAM,IAAM;IACb,MAAM;MAAEyB;IAAuB,CAAC,GAAGzB,MAAM,CAAET,oDAAY,CAAC;IACxD,MAAMmC,MAAM,GAAG,CAAC,CAAC;IAEjBL,gBAAgB,CAACM,OAAO,CAAIC,KAAK,IAAM;MACtC,IAAI;QACHF,MAAM,CAAEE,KAAK,CAAE,GAAGH,sBAAsB,CAAEG,KAAM,CAAC;MAClD,CAAC,CAAC,OAAQC,KAAK,EAAG;QACjBH,MAAM,CAAEE,KAAK,CAAE,GAAG,EAAE;MACrB;IACD,CAAE,CAAC;IAEH,OAAOF,MAAM;EACd,CAAC,EACD,CAAEL,gBAAgB,CACnB,CAAC;;EAED;EACA,MAAM,CAAES,IAAI,CAAE,GAAGjB,mEAAa,CAAE,UAAU,EAAEjB,QAAQ,EAAE,MAAM,EAAEC,MAAO,CAAC;;EAEtE;EACA,MAAM;IAAEkC;EAAgB,CAAC,GAAGd,yEAAe,CAAEM,mBAAoB,CAAC;EAElE,MAAMS,aAAa,GAAGd,0EAAgB,CACrCK,mBAAmB,EACnBQ,eACD,CAAC;;EAED;EACA,MAAM,CAAEE,WAAW,EAAEC,WAAW,CAAE,GAAGrB,mEAAa,CACjD,UAAU,EACVjB,QAAQ,EACR,MAAM,EACNC,MACD,CAAC;EAED,MAAMsC,iBAAiB,GAAGxB,0DAAM,CAAE,EAAG,CAAC;EAEtC,MAAMyB,qBAAqB,GAAGC,IAAI,CAACC,SAAS,CAAEd,eAAgB,CAAC;EAC/D,MAAMe,kBAAkB,GAAG3B,2DAAO,CACjC,MAAMwB,qBAAqB,EAC3B,CAAEA,qBAAqB,CACxB,CAAC;EAED,MAAMI,UAAU,GAAGH,IAAI,CAACC,SAAS,CAAER,IAAK,CAAC;EACzC,MAAMW,OAAO,GAAG7B,2DAAO,CAAE,MAAM4B,UAAU,EAAE,CAAEA,UAAU,CAAG,CAAC;EAE3D,MAAME,qBAAqB,GAAGL,IAAI,CAACC,SAAS,CAAEP,eAAgB,CAAC;EAC/D,MAAMY,kBAAkB,GAAG/B,2DAAO,CACjC,MAAM8B,qBAAqB,EAC3B,CAAEA,qBAAqB,CACxB,CAAC;EAED,MAAME,mBAAmB,GAAGP,IAAI,CAACC,SAAS,CAAEN,aAAc,CAAC;EAC3D,MAAMa,gBAAgB,GAAGjC,2DAAO,CAC/B,MAAMgC,mBAAmB,EACzB,CAAEA,mBAAmB,CACtB,CAAC;EAEDlC,6DAAS,CAAE,MAAM;IAChB;IACA,IAAK,CAAEb,MAAM,IAAI,CAAEE,QAAQ,EAAG;MAC7B;IACD;;IAEA;IACA,IAAKA,QAAQ,KAAK,SAAS,EAAG;MAC7B;IACD;;IAEA;IACA,MAAM+C,SAAS,GAAGC,UAAU,CAAE,MAAM;MACnC,MAAMC,aAAa,GAAGhC,+EAAwB,CAC7CjB,QAAQ,EACRoB,SAAS,EACTK,eAAe,EACfM,IAAI,IAAI,CAAC,CAAC,EACVE,aAAa,IAAI,CAAC,CACnB,CAAC;;MAED;MACA,IACCgB,aAAa,IACbA,aAAa,KAAKf,WAAW,IAC7Be,aAAa,KAAKb,iBAAiB,CAACc,OAAO,EAC1C;QACDd,iBAAiB,CAACc,OAAO,GAAGD,aAAa;QACzCd,WAAW,CAAEc,aAAc,CAAC;MAC7B;IACD,CAAC,EAAE,GAAI,CAAC;IAER,OAAO,MAAME,YAAY,CAAEJ,SAAU,CAAC;EACvC,CAAC,EAAE,CACFjD,MAAM,EACNE,QAAQ,EACRwC,kBAAkB,EAClBE,OAAO,EACPE,kBAAkB,EAClBE,gBAAgB,EAChBZ,WAAW,EACXC,WAAW,EACXf,SAAS,EACTK,eAAe,EACfM,IAAI,EACJE,aAAa,CACZ,CAAC;EAEH,OAAO,IAAI;AACZ,CAAC,C;;;;;;;;;;;;;;;;;;;;;ACjJ4C;AACD;AACa;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACO,SAASf,eAAeA,CAAEK,aAAa,EAAG;EAChD;EACA,MAAM6B,iBAAiB,GAAG9D,0DAAS,CAChCW,MAAM,IAAM;IACb,MAAMoD,SAAS,GAAG,CAAC,CAAC;IAEpB9B,aAAa,CAACK,OAAO,CAAI0B,YAAY,IAAM;MAC1C,MAAMC,QAAQ,GAAGtD,MAAM,CAAE,MAAO,CAAC,CAACuD,WAAW,CAAEF,YAAa,CAAC;MAE7D,IAAKC,QAAQ,EAAG;QACf,MAAME,QAAQ,GAAGF,QAAQ,CAACG,SAAS,IAAIJ,YAAY;QACnDD,SAAS,CAAEC,YAAY,CAAE,GAAGG,QAAQ;MACrC,CAAC,MAAM;QACNJ,SAAS,CAAEC,YAAY,CAAE,GAAGA,YAAY;MACzC;IACD,CAAE,CAAC;IAEH,OAAOD,SAAS;EACjB,CAAC,EACD,CAAE9B,aAAa,CAChB,CAAC;;EAED;EACA,MAAMoC,iBAAiB,GAAG9C,2DAAO,CAChC,MAAMuC,iBAAiB,EACvB,CAAEA,iBAAiB,CACpB,CAAC;;EAED;EACA,MAAMQ,kBAAkB,GAAGtE,0DAAS,CACjCW,MAAM,IAAM;IACb,MAAM;MAAEyB;IAAuB,CAAC,GAAGzB,MAAM,CAAET,oDAAY,CAAC;IACxD,MAAMqE,GAAG,GAAG,CAAC,CAAC;IAEdtC,aAAa,CAACK,OAAO,CAAI0B,YAAY,IAAM;MAC1C,MAAMG,QAAQ,GACbE,iBAAiB,CAAEL,YAAY,CAAE,IAAIA,YAAY;MAClD,IAAI;QACH,MAAMQ,OAAO,GAAGpC,sBAAsB,CAAE+B,QAAS,CAAC;QAClDI,GAAG,CAAEP,YAAY,CAAE,GAAGQ,OAAO,IAAI,EAAE;MACpC,CAAC,CAAC,OAAQhC,KAAK,EAAG;QACjB+B,GAAG,CAAEP,YAAY,CAAE,GAAG,EAAE;MACzB;IACD,CAAE,CAAC;IAEH,OAAOO,GAAG;EACX,CAAC,EACD,CAAEtC,aAAa,EAAEoC,iBAAiB,CACnC,CAAC;;EAED;EACA,MAAM3B,eAAe,GAAGnB,2DAAO,CAC9B,MAAM+C,kBAAkB,EACxB,CAAEA,kBAAkB,CACrB,CAAC;EAED,OAAO;IAAER,iBAAiB,EAAEO,iBAAiB;IAAE3B;EAAgB,CAAC;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASb,gBAAgBA,CAAEI,aAAa,EAAES,eAAe,EAAG;EAClE;EACA,MAAM+B,gBAAgB,GAAGzE,0DAAS,CAC/BW,MAAM,IAAM;IACb,MAAM+D,KAAK,GAAG,CAAC,CAAC;IAEhBzC,aAAa,CAACK,OAAO,CAAI0B,YAAY,IAAM;MAC1C,MAAMO,GAAG,GAAG7B,eAAe,CAAEsB,YAAY,CAAE;MAE3C,IAAKO,GAAG,IAAIA,GAAG,CAACI,MAAM,GAAG,CAAC,EAAG;QAC5B,MAAMC,WAAW,GAAGL,GAAG,CACrBM,GAAG,CAAIC,EAAE,IAAM;UACf,MAAMC,IAAI,GAAGpE,MAAM,CAAE,MAAO,CAAC,CAACqE,eAAe,CAC5C,UAAU,EACVhB,YAAY,EACZc,EACD,CAAC;UACD,OAAOC,IAAI;QACZ,CAAE,CAAC,CACFE,MAAM,CAAEC,OAAQ,CAAC;QAEnB,IAAKN,WAAW,CAACD,MAAM,GAAG,CAAC,EAAG;UAC7B,MAAMQ,KAAK,GAAGP,WAAW,CAACC,GAAG,CAAIE,IAAI,IAAMA,IAAI,CAACK,IAAK,CAAC;UACtDV,KAAK,CAAEV,YAAY,CAAE,GAAGmB,KAAK,CAACE,IAAI,CAAE,GAAI,CAAC;QAC1C;MACD;IACD,CAAE,CAAC;IAEH,OAAOX,KAAK;EACb,CAAC,EACD,CAAEzC,aAAa,EAAES,eAAe,CACjC,CAAC;;EAED;EACA,MAAMC,aAAa,GAAGpB,2DAAO,CAC5B,MAAMkD,gBAAgB,EACtB,CAAEA,gBAAgB,CACnB,CAAC;EAED,OAAO9B,aAAa;AACrB,C;;;;;;;;;;;;;;;;ACpHwD;;AAExD;AACA;AACA;AACA;AACA;AACA;AACO,SAAS4C,YAAYA,CAAEH,IAAI,EAAG;EACpC;EACA,MAAMI,SAAS,GAAGJ,IAAI,CACpBK,KAAK,CAAE,GAAI,CAAC,CACZR,MAAM,CAAIS,IAAI,IAAMA,IAAI,CAACC,IAAI,CAAC,CAAC,KAAK,EAAG,CAAC;EAE1CP,IAAI,GAAGI,SAAS,CAACH,IAAI,CAAE,GAAI,CAAC;;EAE5B;EACAD,IAAI,GAAGA,IAAI,CACTQ,WAAW,CAAC,CAAC,CACbC,OAAO,CAAE,aAAa,EAAE,GAAI,CAAC,CAC7BA,OAAO,CAAE,KAAK,EAAE,GAAI,CAAC,CACrBA,OAAO,CAAE,QAAQ,EAAE,EAAG,CAAC;EAEzB,OAAOT,IAAI;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASzD,wBAAwBA,CACvCjB,QAAQ,EACRoB,SAAS,EACTC,UAAU,EACVU,IAAI,EACJE,aAAa,EACZ;EACD,IAAK,CAAEjC,QAAQ,EAAG;IACjB,OAAO,EAAE;EACV;;EAEA;EACA,MAAM0E,IAAI,GAAG1E,QAAQ,CAACmF,OAAO,CAAE,cAAc,EAAE,CAAEC,KAAK,EAAEC,QAAQ,KAAM;IACrE;IACA,MAAMC,MAAM,GAAGlE,SAAS,CAACmE,IAAI,CAAIC,CAAC,IAAMA,CAAC,CAACC,GAAG,KAAKJ,QAAS,CAAC;IAE5D,IAAK,CAAEC,MAAM,EAAG;MACf,OAAO,EAAE;IACV;IAEA,IAAKA,MAAM,CAACI,KAAK,EAAG;MACnB;MACA,MAAMC,KAAK,GACV1D,aAAa,IAAIA,aAAa,CAAEqD,MAAM,CAACzD,KAAK,CAAE,GAC3CI,aAAa,CAAEqD,MAAM,CAACzD,KAAK,CAAE,GAC7B,EAAE;MACN,OAAO8D,KAAK;IACb;IAEA,IAAKL,MAAM,CAACM,MAAM,EAAG;MACpB;MACA,IAAID,KAAK,GACR5D,IAAI,IAAIA,IAAI,CAAEuD,MAAM,CAACzD,KAAK,CAAE,KAAKgE,SAAS,GACvC9D,IAAI,CAAEuD,MAAM,CAACzD,KAAK,CAAE,GACpB,EAAE;;MAEN;MACA,IAAKyD,MAAM,CAACQ,QAAQ,IAAIH,KAAK,EAAG;QAC/B;QACA,IAAK,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAG;UAClDA,KAAK,GAAGA,KAAK,CAAEL,MAAM,CAACQ,QAAQ,CAAE;;UAEhC;UACA,IAAKH,KAAK,KAAKE,SAAS,IAAIF,KAAK,KAAK,IAAI,EAAG;YAC5C,OAAO,EAAE;UACV;QACD,CAAC,MAAM;UACN;UACA,OAAO,EAAE;QACV;MACD;MAEA,MAAMI,SAAS,GAAGnB,qEAAgB,CACjCU,MAAM,CAACzD,KAAK,EACZ8D,KAAK,EACLL,MAAM,CAACU,MAAM,EACb,IAAI,CAAC;MACN,CAAC;MACD,OAAOD,SAAS;IACjB;;IAEA;IACA,MAAMJ,KAAK,GAAGtE,UAAU,CAAEiE,MAAM,CAACzD,KAAK,CAAE;IACxC,MAAMkE,SAAS,GAAGnB,qEAAgB,CACjCU,MAAM,CAACzD,KAAK,EACZ8D,KAAK,EACLL,MAAM,CAACU,MAAM,EACb,KAAK,CAAC;IACP,CAAC;IACD,OAAOD,SAAS;EACjB,CAAE,CAAC;EAEH,OAAOlB,YAAY,CAAEH,IAAK,CAAC;AAC5B,C;;;;;;;;;;;;;;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS3D,sBAAsBA,CAAEf,QAAQ,EAAG;EAClD,IAAK,CAAEA,QAAQ,EAAG;IACjB,OAAO,EAAE;EACV;EAEA,MAAMoB,SAAS,GAAG,EAAE;EACpB,MAAM6E,KAAK,GAAG,cAAc;EAC5B,IAAIb,KAAK;EAET,OAAQ,CAAEA,KAAK,GAAGa,KAAK,CAACC,IAAI,CAAElG,QAAS,CAAC,MAAO,IAAI,EAAG;IACrD,MAAMqF,QAAQ,GAAGD,KAAK,CAAE,CAAC,CAAE;;IAE3B;IACA,MAAMQ,MAAM,GAAGP,QAAQ,CAACc,UAAU,CAAE,OAAQ,CAAC;IAC7C,MAAMT,KAAK,GAAGL,QAAQ,CAACc,UAAU,CAAE,MAAO,CAAC;;IAE3C;IACA,IAAIC,aAAa,GAAGf,QAAQ;IAE5B,IAAKO,MAAM,EAAG;MACbQ,aAAa,GAAGf,QAAQ,CAACgB,SAAS,CAAE,CAAE,CAAC;IACxC,CAAC,MAAM,IAAKX,KAAK,EAAG;MACnBU,aAAa,GAAGf,QAAQ,CAACgB,SAAS,CAAE,CAAE,CAAC;IACxC;;IAEA;IACA,MAAMC,KAAK,GAAGF,aAAa,CAACrB,KAAK,CAAE,GAAI,CAAC;IACxC,MAAMiB,MAAM,GAAGM,KAAK,CAACrC,MAAM,GAAG,CAAC,GAAGqC,KAAK,CAAEA,KAAK,CAACrC,MAAM,GAAG,CAAC,CAAE,GAAG,IAAI;;IAElE;IACA,MAAMsC,SAAS,GAAGD,KAAK,CAAE,CAAC,CAAE;IAC5B,MAAME,UAAU,GAAGD,SAAS,CAACxB,KAAK,CAAE,GAAI,CAAC;IACzC,MAAMlD,KAAK,GAAG2E,UAAU,CAAE,CAAC,CAAE;IAC7B,MAAMV,QAAQ,GAAGU,UAAU,CAACvC,MAAM,GAAG,CAAC,GAAGuC,UAAU,CAAE,CAAC,CAAE,GAAG,IAAI;IAE/DpF,SAAS,CAACqF,IAAI,CAAE;MACf5E,KAAK;MACLiE,QAAQ;MACRE,MAAM;MACNJ,MAAM;MACNF,KAAK;MACLD,GAAG,EAAEJ;IACN,CAAE,CAAC;EACJ;EAEA,OAAOjE,SAAS;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASJ,qBAAqBA,CAAEI,SAAS,EAAG;EAClD,MAAMC,UAAU,GAAG,CAClB,GAAG,IAAIqF,GAAG,CACTtF,SAAS,CACPmD,MAAM,CAAIiB,CAAC,IAAM,CAAEA,CAAC,CAACI,MAAM,IAAI,CAAEJ,CAAC,CAACE,KAAM,CAAC,CAC1CvB,GAAG,CAAIqB,CAAC,IAAMA,CAAC,CAAC3D,KAAM,CACzB,CAAC,CACD;EAED,MAAM8E,UAAU,GAAG,CAClB,GAAG,IAAID,GAAG,CACTtF,SAAS,CAACmD,MAAM,CAAIiB,CAAC,IAAMA,CAAC,CAACI,MAAO,CAAC,CAACzB,GAAG,CAAIqB,CAAC,IAAMA,CAAC,CAAC3D,KAAM,CAC7D,CAAC,CACD;EAED,MAAMN,aAAa,GAAG,CACrB,GAAG,IAAImF,GAAG,CACTtF,SAAS,CAACmD,MAAM,CAAIiB,CAAC,IAAMA,CAAC,CAACE,KAAM,CAAC,CAACvB,GAAG,CAAIqB,CAAC,IAAMA,CAAC,CAAC3D,KAAM,CAC5D,CAAC,CACD;EAED,OAAO;IAAER,UAAU;IAAEsF,UAAU;IAAEpF;EAAc,CAAC;AACjD,C;;;;;;;;;;;;;;;;;;;AClF2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA,SAASsF,UAAUA,CAAElB,KAAK,EAAG;EAC5B,IAAK,CAAEA,KAAK,EAAG;IACd,OAAO,KAAK;EACb;;EAEA;EACA,IAAK,OAAOA,KAAK,KAAK,QAAQ,EAAG;IAChC;IACA,IAAK,oBAAoB,CAACmB,IAAI,CAAEnB,KAAM,CAAC,EAAG;MACzC,OAAO,IAAI;IACZ;IACA;IACA,IAAK,aAAa,CAACmB,IAAI,CAAEnB,KAAM,CAAC,EAAG;MAClC,OAAO,IAAI;IACZ;EACD;;EAEA;EACA,IAAK,OAAOA,KAAK,KAAK,QAAQ,EAAG;IAChC;IACA,MAAMoB,QAAQ,GAAGC,MAAM,CAAErB,KAAM,CAAC;IAChC,IAAKoB,QAAQ,CAAC9C,MAAM,IAAI,EAAE,IAAI8C,QAAQ,CAAC9C,MAAM,IAAI,EAAE,EAAG;MACrD,OAAO,IAAI;IACZ;EACD;EAEA,OAAO,KAAK;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASgD,eAAeA,CAAEC,QAAQ,EAAElB,MAAM,EAAG;EACnD,IAAK,CAAEkB,QAAQ,EAAG;IACjB,OAAO,EAAE;EACV;;EAEA;EACA,IAAKlB,MAAM,EAAG;IACb,IAAI;MACH,OAAOY,yDAAQ,CAAEZ,MAAM,EAAEkB,QAAS,CAAC;IACpC,CAAC,CAAC,OAAQpF,KAAK,EAAG;MACjB;IAAA;EAEF;;EAEA;EACA,IAAI;IACH,MAAMqF,IAAI,GAAG,IAAIC,IAAI,CAAEF,QAAS,CAAC;IACjC,IAAKG,KAAK,CAAEF,IAAI,CAACG,OAAO,CAAC,CAAE,CAAC,EAAG;MAC9B,OAAO,EAAE;IACV;IAEA,MAAMC,IAAI,GAAGJ,IAAI,CAACK,WAAW,CAAC,CAAC;IAC/B,MAAMC,KAAK,GAAGT,MAAM,CAAEG,IAAI,CAACO,QAAQ,CAAC,CAAC,GAAG,CAAE,CAAC,CAACC,QAAQ,CAAE,CAAC,EAAE,GAAI,CAAC;IAC9D,MAAMC,GAAG,GAAGZ,MAAM,CAAEG,IAAI,CAACU,OAAO,CAAC,CAAE,CAAC,CAACF,QAAQ,CAAE,CAAC,EAAE,GAAI,CAAC;;IAEvD;IACA,IAAK3B,MAAM,KAAK,OAAO,IAAI,CAAEA,MAAM,EAAG;MACrC,OAAO,GAAIuB,IAAI,IAAME,KAAK,IAAMG,GAAG,EAAG;IACvC;IACA,IAAK5B,MAAM,KAAK,GAAG,EAAG;MACrB,OAAOgB,MAAM,CAAEO,IAAK,CAAC;IACtB;IACA,IAAKvB,MAAM,KAAK,GAAG,EAAG;MACrB,OAAOyB,KAAK;IACb;IACA,IAAKzB,MAAM,KAAK,GAAG,EAAG;MACrB,OAAO4B,GAAG;IACX;;IAEA;IACA,OAAO,GAAIL,IAAI,IAAME,KAAK,IAAMG,GAAG,EAAG;EACvC,CAAC,CAAC,OAAQ9F,KAAK,EAAG;IACjB;IACAgG,OAAO,CAAChG,KAAK,CAAE,8CAA8C,EAAEA,KAAM,CAAC;IACtE,OAAO,EAAE;EACV;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASiG,eAAeA,CAAEpC,KAAK,EAAG;EACxC,IAAK,CAAEA,KAAK,EAAG;IACd,OAAO,EAAE;EACV;EAEA,IAAK,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAG;IAClD,OAAOqB,MAAM,CAAErB,KAAM,CAAC;EACvB;EAEA,IAAKA,KAAK,CAACF,GAAG,KAAKI,SAAS,EAAG;IAC9B,OAAOF,KAAK,CAACF,GAAG;EACjB;EAEA,IAAKE,KAAK,CAACqC,QAAQ,KAAKnC,SAAS,EAAG;IACnC,OAAOmB,MAAM,CAAErB,KAAK,CAACqC,QAAS,CAAC,CAAC7C,OAAO,CAAE,UAAU,EAAE,EAAG,CAAC;EAC1D;EAEA,OAAO6B,MAAM,CAAErB,KAAM,CAAC;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASsC,mBAAmBA,CAAEC,WAAW,EAAElC,MAAM,EAAG;EAC1D,IAAK,CAAEA,MAAM,EAAG;IACf,OAAOkC,WAAW;EACnB;EAEA,IAAKlC,MAAM,KAAK,OAAO,EAAG;IACzB,OAAOkC,WAAW,CAAChD,WAAW,CAAC,CAAC;EACjC;EAEA,IAAKc,MAAM,KAAK,OAAO,EAAG;IACzB,OAAOkC,WAAW,CAACC,WAAW,CAAC,CAAC;EACjC;EAEA,OAAOD,WAAW;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAStD,gBAAgBA,CAAE/C,KAAK,EAAE8D,KAAK,EAAEK,MAAM,EAAEJ,MAAM,GAAG,KAAK,EAAG;EACxE,IAAK,CAAED,KAAK,EAAG;IACd,OAAO,EAAE;EACV;;EAEA;EACA,MAAMuB,QAAQ,GAAGa,eAAe,CAAEpC,KAAM,CAAC;;EAEzC;EACA,IAAK,CAAEK,MAAM,EAAG;IACf,OAAOkB,QAAQ;EAChB;;EAEA;EACA;EACA,MAAMkB,YAAY,GAAG,6BAA6B,CAACtB,IAAI,CAAEd,MAAO,CAAC;;EAEjE;EACA;EACA,IAAKnE,KAAK,KAAK,MAAM,IAAM+D,MAAM,IAAIwC,YAAc,EAAG;IACrD;IACA,IAAKxC,MAAM,IAAI,CAAEiB,UAAU,CAAEK,QAAS,CAAC,EAAG;MACzC;MACA,OAAOe,mBAAmB,CAAEf,QAAQ,EAAElB,MAAO,CAAC;IAC/C;;IAEA;IACA,MAAMqC,aAAa,GAAGpB,eAAe,CAAEC,QAAQ,EAAElB,MAAO,CAAC;IACzD,IAAKqC,aAAa,EAAG;MACpB,OAAOA,aAAa;IACrB;EACD;;EAEA;EACA,OAAOJ,mBAAmB,CAAEf,QAAQ,EAAElB,MAAO,CAAC;AAC/C,C;;;;;;;;;;AC1LA,0C;;;;;;;;;;ACAA,sC;;;;;;;;;;ACAA,sC;;;;;;;;;;ACAA,wC;;;;;;;;;;ACAA,yC;;;;;;;;;;ACAA,yC;;;;;;;;;;ACAA,2C;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;;;;;;;;;;ACNoD;AAEqB;;AAEzE;AACA;AACA;AACAsC,kEAAc,CAAE,qBAAqB,EAAE;EACtCC,MAAM,EAAE3I,kFAAoBA;AAC7B,CAAE,CAAC,C","sources":["webpack://speaking-permalinks/./src/components/DynamicSlugGenerator.js","webpack://speaking-permalinks/./src/components/SlugGeneratorCore.js","webpack://speaking-permalinks/./src/hooks/use-taxonomy-data.js","webpack://speaking-permalinks/./src/utils/slug-generator.js","webpack://speaking-permalinks/./src/utils/template-parser.js","webpack://speaking-permalinks/./src/utils/value-formatter.js","webpack://speaking-permalinks/external window [\"wp\",\"coreData\"]","webpack://speaking-permalinks/external window [\"wp\",\"data\"]","webpack://speaking-permalinks/external window [\"wp\",\"date\"]","webpack://speaking-permalinks/external window [\"wp\",\"editor\"]","webpack://speaking-permalinks/external window [\"wp\",\"element\"]","webpack://speaking-permalinks/external window [\"wp\",\"plugins\"]","webpack://speaking-permalinks/external window \"ReactJSXRuntime\"","webpack://speaking-permalinks/webpack/bootstrap","webpack://speaking-permalinks/webpack/runtime/compat get default export","webpack://speaking-permalinks/webpack/runtime/define property getters","webpack://speaking-permalinks/webpack/runtime/hasOwnProperty shorthand","webpack://speaking-permalinks/webpack/runtime/make namespace object","webpack://speaking-permalinks/./src/index.js"],"sourcesContent":["import { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\n\nimport { SlugGeneratorCore } from './SlugGeneratorCore';\n\n/**\n * Dynamic Slug Generator Plugin\n *\n * This plugin monitors post data changes and automatically generates slugs\n * based on the template defined in post type support configuration.\n *\n * Only renders when the current post type supports 'speaking-permalinks'.\n *\n * @return {Element|null} The SlugGeneratorCore component or null.\n */\nexport const DynamicSlugGenerator = () => {\n\tconst { postType, postId, hasSpeakingPermalinksSupport, template } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst editor = select( editorStore );\n\n\t\t\tif ( ! editor ) {\n\t\t\t\treturn {\n\t\t\t\t\tpostType: null,\n\t\t\t\t\tpostId: null,\n\t\t\t\t\thasSpeakingPermalinksSupport: false,\n\t\t\t\t\ttemplate: '',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst currentPostType = editor.getCurrentPostType();\n\t\t\tconst postTypeObject =\n\t\t\t\tselect( 'core' ).getPostType( currentPostType );\n\n\t\t\t// Check if post type supports speaking permalinks\n\t\t\tconst supports = postTypeObject?.supports || {};\n\t\t\tconst hasSpeakingPermalinks =\n\t\t\t\tsupports[ 'speaking-permalinks' ]?.[ 0 ] || false;\n\n\t\t\t// Get the template from post type support config\n\t\t\tlet templateValue = '';\n\t\t\tif ( hasSpeakingPermalinks ) {\n\t\t\t\ttemplateValue = hasSpeakingPermalinks.template;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tpostType: currentPostType,\n\t\t\t\tpostId: editor.getCurrentPostId(),\n\t\t\t\thasSpeakingPermalinksSupport: hasSpeakingPermalinks,\n\t\t\t\ttemplate: templateValue,\n\t\t\t};\n\t\t}, [] );\n\n\t// Only render if the post type supports speaking permalinks\n\tif ( ! hasSpeakingPermalinksSupport ) {\n\t\treturn null;\n\t}\n\n\t// Only render the core component when we have the required data\n\tif ( ! postType || ! postId || ! template ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SlugGeneratorCore\n\t\t\tpostType={ postType }\n\t\t\tpostId={ postId }\n\t\t\ttemplate={ template }\n\t\t/>\n\t);\n};\n","import { useEffect, useRef, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { store as editorStore } from '@wordpress/editor';\n\nimport {\n\tparseTemplateVariables,\n\textractRequiredFields,\n} from '../utils/template-parser';\nimport { generateSlugFromTemplate } from '../utils/slug-generator';\nimport { useTaxonomyData, useTaxonomyTerms } from '../hooks/use-taxonomy-data';\n\n/**\n * Slug Generator Core Component\n *\n * This component handles the actual slug generation logic.\n * It's only rendered when postType and postId are available.\n *\n * @param {Object} props          Component props.\n * @param {string} props.postType The post type.\n * @param {number} props.postId   The post ID.\n * @param {string} props.template The slug template.\n * @return {null} This component doesn't render anything.\n */\nexport const SlugGeneratorCore = ( { postType, postId, template } ) => {\n\t// Parse template to get all variables\n\tconst variables = useMemo(\n\t\t() => parseTemplateVariables( template ),\n\t\t[ template ]\n\t);\n\n\t// Extract required fields from variables\n\tconst { postFields: postFieldsNeeded, taxonomySlugs: taxonomySlugsNeeded } =\n\t\tuseMemo( () => extractRequiredFields( variables ), [ variables ] );\n\n\t// Get all post data in one useSelect call\n\tconst postFieldValues = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedPostAttribute } = select( editorStore );\n\t\t\tconst values = {};\n\n\t\t\tpostFieldsNeeded.forEach( ( field ) => {\n\t\t\t\ttry {\n\t\t\t\t\tvalues[ field ] = getEditedPostAttribute( field );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tvalues[ field ] = '';\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn values;\n\t\t},\n\t\t[ postFieldsNeeded ]\n\t);\n\n\t// Get meta fields\n\tconst [ meta ] = useEntityProp( 'postType', postType, 'meta', postId );\n\n\t// Get taxonomy data using custom hooks\n\tconst { taxonomyTermIds } = useTaxonomyData( taxonomySlugsNeeded );\n\n\tconst taxonomyTerms = useTaxonomyTerms(\n\t\ttaxonomySlugsNeeded,\n\t\ttaxonomyTermIds\n\t);\n\n\t// Get the current slug for comparison\n\tconst [ currentSlug, setPostSlug ] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'slug',\n\t\tpostId\n\t);\n\n\tconst lastGeneratedSlug = useRef( '' );\n\n\tconst postFieldValuesString = JSON.stringify( postFieldValues );\n\tconst postFieldValuesKey = useMemo(\n\t\t() => postFieldValuesString,\n\t\t[ postFieldValuesString ]\n\t);\n\n\tconst metaString = JSON.stringify( meta );\n\tconst metaKey = useMemo( () => metaString, [ metaString ] );\n\n\tconst taxonomyTermIdsString = JSON.stringify( taxonomyTermIds );\n\tconst taxonomyTermIdsKey = useMemo(\n\t\t() => taxonomyTermIdsString,\n\t\t[ taxonomyTermIdsString ]\n\t);\n\n\tconst taxonomyTermsString = JSON.stringify( taxonomyTerms );\n\tconst taxonomyTermsKey = useMemo(\n\t\t() => taxonomyTermsString,\n\t\t[ taxonomyTermsString ]\n\t);\n\n\tuseEffect( () => {\n\t\t// Only generate slug if we have the necessary data\n\t\tif ( ! postId || ! template ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if template is just the default\n\t\tif ( template === '{title}' ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Debounce slug generation\n\t\tconst timeoutId = setTimeout( () => {\n\t\t\tconst generatedSlug = generateSlugFromTemplate(\n\t\t\t\ttemplate,\n\t\t\t\tvariables,\n\t\t\t\tpostFieldValues,\n\t\t\t\tmeta || {},\n\t\t\t\ttaxonomyTerms || {}\n\t\t\t);\n\n\t\t\t// Only update if the slug has changed and it's different from what we last generated\n\t\t\tif (\n\t\t\t\tgeneratedSlug &&\n\t\t\t\tgeneratedSlug !== currentSlug &&\n\t\t\t\tgeneratedSlug !== lastGeneratedSlug.current\n\t\t\t) {\n\t\t\t\tlastGeneratedSlug.current = generatedSlug;\n\t\t\t\tsetPostSlug( generatedSlug );\n\t\t\t}\n\t\t}, 200 );\n\n\t\treturn () => clearTimeout( timeoutId );\n\t}, [\n\t\tpostId,\n\t\ttemplate,\n\t\tpostFieldValuesKey,\n\t\tmetaKey,\n\t\ttaxonomyTermIdsKey,\n\t\ttaxonomyTermsKey,\n\t\tcurrentSlug,\n\t\tsetPostSlug,\n\t\tvariables,\n\t\tpostFieldValues,\n\t\tmeta,\n\t\ttaxonomyTerms,\n\t] );\n\n\treturn null;\n};\n","import { useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * Custom hook to fetch taxonomy REST bases and term IDs.\n *\n * @param {Array} taxonomySlugs Array of taxonomy slugs needed.\n * @return {Object} Object containing taxonomyRestBases and taxonomyTermIds.\n */\nexport function useTaxonomyData( taxonomySlugs ) {\n\t// Get actual taxonomy REST bases from WordPress\n\tconst taxonomyRestBases = useSelect(\n\t\t( select ) => {\n\t\t\tconst restBases = {};\n\n\t\t\ttaxonomySlugs.forEach( ( taxonomySlug ) => {\n\t\t\t\tconst taxonomy = select( 'core' ).getTaxonomy( taxonomySlug );\n\n\t\t\t\tif ( taxonomy ) {\n\t\t\t\t\tconst restBase = taxonomy.rest_base || taxonomySlug;\n\t\t\t\t\trestBases[ taxonomySlug ] = restBase;\n\t\t\t\t} else {\n\t\t\t\t\trestBases[ taxonomySlug ] = taxonomySlug;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn restBases;\n\t\t},\n\t\t[ taxonomySlugs ]\n\t);\n\n\t// Memoize to prevent unnecessary re-renders\n\tconst memoizedRestBases = useMemo(\n\t\t() => taxonomyRestBases,\n\t\t[ taxonomyRestBases ]\n\t);\n\n\t// Get actual taxonomy term IDs from WordPress\n\tconst taxonomyTermIdsRaw = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedPostAttribute } = select( editorStore );\n\t\t\tconst ids = {};\n\n\t\t\ttaxonomySlugs.forEach( ( taxonomySlug ) => {\n\t\t\t\tconst restBase =\n\t\t\t\t\tmemoizedRestBases[ taxonomySlug ] || taxonomySlug;\n\t\t\t\ttry {\n\t\t\t\t\tconst termIds = getEditedPostAttribute( restBase );\n\t\t\t\t\tids[ taxonomySlug ] = termIds || [];\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tids[ taxonomySlug ] = [];\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn ids;\n\t\t},\n\t\t[ taxonomySlugs, memoizedRestBases ]\n\t);\n\n\t// Memoize term IDs\n\tconst taxonomyTermIds = useMemo(\n\t\t() => taxonomyTermIdsRaw,\n\t\t[ taxonomyTermIdsRaw ]\n\t);\n\n\treturn { taxonomyRestBases: memoizedRestBases, taxonomyTermIds };\n}\n\n/**\n * Custom hook to fetch taxonomy term objects and format them as slugs.\n *\n * @param {Array}  taxonomySlugs   Array of taxonomy slugs needed.\n * @param {Object} taxonomyTermIds Object mapping taxonomy slugs to term ID arrays.\n * @return {Object} Object containing formatted taxonomy term slugs.\n */\nexport function useTaxonomyTerms( taxonomySlugs, taxonomyTermIds ) {\n\t// Get actual taxonomy terms from WordPress\n\tconst rawTaxonomyTerms = useSelect(\n\t\t( select ) => {\n\t\t\tconst terms = {};\n\n\t\t\ttaxonomySlugs.forEach( ( taxonomySlug ) => {\n\t\t\t\tconst ids = taxonomyTermIds[ taxonomySlug ];\n\n\t\t\t\tif ( ids && ids.length > 0 ) {\n\t\t\t\t\tconst termObjects = ids\n\t\t\t\t\t\t.map( ( id ) => {\n\t\t\t\t\t\t\tconst term = select( 'core' ).getEntityRecord(\n\t\t\t\t\t\t\t\t'taxonomy',\n\t\t\t\t\t\t\t\ttaxonomySlug,\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn term;\n\t\t\t\t\t\t} )\n\t\t\t\t\t\t.filter( Boolean );\n\n\t\t\t\t\tif ( termObjects.length > 0 ) {\n\t\t\t\t\t\tconst slugs = termObjects.map( ( term ) => term.slug );\n\t\t\t\t\t\tterms[ taxonomySlug ] = slugs.join( '-' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn terms;\n\t\t},\n\t\t[ taxonomySlugs, taxonomyTermIds ]\n\t);\n\n\t// Memoize the taxonomy terms to prevent unnecessary re-renders\n\tconst taxonomyTerms = useMemo(\n\t\t() => rawTaxonomyTerms,\n\t\t[ rawTaxonomyTerms ]\n\t);\n\n\treturn taxonomyTerms;\n}\n","import { formatFieldValue } from './value-formatter.js';\n\n/**\n * Sanitize a slug string according to WordPress standards.\n *\n * @param {string} slug The slug to sanitize.\n * @return {string} The sanitized slug.\n */\nexport function sanitizeSlug( slug ) {\n\t// Remove empty segments\n\tconst slugParts = slug\n\t\t.split( '-' )\n\t\t.filter( ( part ) => part.trim() !== '' );\n\n\tslug = slugParts.join( '-' );\n\n\t// Sanitize: lowercase, remove non-alphanumeric except hyphens, collapse multiple hyphens\n\tslug = slug\n\t\t.toLowerCase()\n\t\t.replace( /[^a-z0-9-]/g, '-' )\n\t\t.replace( /-+/g, '-' )\n\t\t.replace( /^-|-$/g, '' );\n\n\treturn slug;\n}\n\n/**\n * Generate slug from template using post data.\n *\n * @param {string} template      The slug template with variables.\n * @param {Array}  variables     Parsed variables from template.\n * @param {Object} postFields    Object containing post field values.\n * @param {Object} meta          Object containing meta field values.\n * @param {Object} taxonomyTerms Object containing taxonomy term slugs.\n * @return {string} The generated slug.\n */\nexport function generateSlugFromTemplate(\n\ttemplate,\n\tvariables,\n\tpostFields,\n\tmeta,\n\ttaxonomyTerms\n) {\n\tif ( ! template ) {\n\t\treturn '';\n\t}\n\n\t// Replace each variable in the template\n\tconst slug = template.replace( /\\{([^}]+)\\}/g, ( match, variable ) => {\n\t\t// Find the matching variable object\n\t\tconst varObj = variables.find( ( v ) => v.raw === variable );\n\n\t\tif ( ! varObj ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif ( varObj.isTax ) {\n\t\t\t// Get taxonomy terms\n\t\t\tconst value =\n\t\t\t\ttaxonomyTerms && taxonomyTerms[ varObj.field ]\n\t\t\t\t\t? taxonomyTerms[ varObj.field ]\n\t\t\t\t\t: '';\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( varObj.isMeta ) {\n\t\t\t// Get meta field value\n\t\t\tlet value =\n\t\t\t\tmeta && meta[ varObj.field ] !== undefined\n\t\t\t\t\t? meta[ varObj.field ]\n\t\t\t\t\t: '';\n\n\t\t\t// Handle array access if arrayKey is specified\n\t\t\tif ( varObj.arrayKey && value ) {\n\t\t\t\t// Check if value is an array or object\n\t\t\t\tif ( typeof value === 'object' && value !== null ) {\n\t\t\t\t\tvalue = value[ varObj.arrayKey ];\n\n\t\t\t\t\t// If still undefined or null after accessing array key, return empty\n\t\t\t\t\tif ( value === undefined || value === null ) {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Value is not an array/object, can't access array key\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst formatted = formatFieldValue(\n\t\t\t\tvarObj.field,\n\t\t\t\tvalue,\n\t\t\t\tvarObj.format,\n\t\t\t\ttrue // isMeta = true\n\t\t\t);\n\t\t\treturn formatted;\n\t\t}\n\n\t\t// Get post field value\n\t\tconst value = postFields[ varObj.field ];\n\t\tconst formatted = formatFieldValue(\n\t\t\tvarObj.field,\n\t\t\tvalue,\n\t\t\tvarObj.format,\n\t\t\tfalse // isMeta = false\n\t\t);\n\t\treturn formatted;\n\t} );\n\n\treturn sanitizeSlug( slug );\n}\n","/**\n * Parse template and extract all variables with their formatting options.\n *\n * @param {string} template The slug template.\n * @return {Array} Array of variable objects with field, arrayKey, format, isMeta, and isTax properties.\n */\nexport function parseTemplateVariables( template ) {\n\tif ( ! template ) {\n\t\treturn [];\n\t}\n\n\tconst variables = [];\n\tconst regex = /\\{([^}]+)\\}/g;\n\tlet match;\n\n\twhile ( ( match = regex.exec( template ) ) !== null ) {\n\t\tconst variable = match[ 1 ];\n\n\t\t// Check if it's a meta field or taxonomy\n\t\tconst isMeta = variable.startsWith( 'meta:' );\n\t\tconst isTax = variable.startsWith( 'tax:' );\n\n\t\t// // Remove prefix if present\n\t\tlet withoutPrefix = variable;\n\n\t\tif ( isMeta ) {\n\t\t\twithoutPrefix = variable.substring( 5 );\n\t\t} else if ( isTax ) {\n\t\t\twithoutPrefix = variable.substring( 4 );\n\t\t}\n\n\t\t// Split by | to get field and format (format comes last)\n\t\tconst parts = withoutPrefix.split( '|' );\n\t\tconst format = parts.length > 1 ? parts[ parts.length - 1 ] : null;\n\n\t\t// The field part may contain array access notation (field:array_key)\n\t\tconst fieldPart = parts[ 0 ];\n\t\tconst fieldParts = fieldPart.split( ':' );\n\t\tconst field = fieldParts[ 0 ];\n\t\tconst arrayKey = fieldParts.length > 1 ? fieldParts[ 1 ] : null;\n\n\t\tvariables.push( {\n\t\t\tfield,\n\t\t\tarrayKey,\n\t\t\tformat,\n\t\t\tisMeta,\n\t\t\tisTax,\n\t\t\traw: variable,\n\t\t} );\n\t}\n\n\treturn variables;\n}\n\n/**\n * Extract unique fields needed from parsed variables.\n *\n * @param {Array} variables Parsed template variables.\n * @return {Object} Object containing postFields, metaFields, and taxonomySlugs arrays.\n */\nexport function extractRequiredFields( variables ) {\n\tconst postFields = [\n\t\t...new Set(\n\t\t\tvariables\n\t\t\t\t.filter( ( v ) => ! v.isMeta && ! v.isTax )\n\t\t\t\t.map( ( v ) => v.field )\n\t\t),\n\t];\n\n\tconst metaFields = [\n\t\t...new Set(\n\t\t\tvariables.filter( ( v ) => v.isMeta ).map( ( v ) => v.field )\n\t\t),\n\t];\n\n\tconst taxonomySlugs = [\n\t\t...new Set(\n\t\t\tvariables.filter( ( v ) => v.isTax ).map( ( v ) => v.field )\n\t\t),\n\t];\n\n\treturn { postFields, metaFields, taxonomySlugs };\n}\n","import { dateI18n } from '@wordpress/date';\n\n/**\n * Check if a value looks like a date that can be formatted.\n *\n * @param {*} value The value to check.\n * @return {boolean} True if the value looks like a date.\n */\nfunction isDateLike( value ) {\n\tif ( ! value ) {\n\t\treturn false;\n\t}\n\n\t// Check if it's a string that looks like a date\n\tif ( typeof value === 'string' ) {\n\t\t// ISO 8601 format: YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS\n\t\tif ( /^\\d{4}-\\d{2}-\\d{2}/.test( value ) ) {\n\t\t\treturn true;\n\t\t}\n\t\t// Unix timestamp (in seconds or milliseconds)\n\t\tif ( /^\\d{10,13}$/.test( value ) ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t// Check if it's a number that could be a Unix timestamp\n\tif ( typeof value === 'number' ) {\n\t\t// Unix timestamps are typically 10 digits (seconds) or 13 digits (milliseconds)\n\t\tconst valueStr = String( value );\n\t\tif ( valueStr.length >= 10 && valueStr.length <= 13 ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Format a date value with the specified PHP date format.\n *\n * @param {string} rawValue The raw date value.\n * @param {string} format   The PHP date format string.\n * @return {string} The formatted date string.\n */\nexport function formatDateValue( rawValue, format ) {\n\tif ( ! rawValue ) {\n\t\treturn '';\n\t}\n\n\t// Try using WordPress's dateI18n first\n\tif ( format ) {\n\t\ttry {\n\t\t\treturn dateI18n( format, rawValue );\n\t\t} catch ( error ) {\n\t\t\t// Fallback to manual formatting\n\t\t}\n\t}\n\n\t// Manual date formatting fallback\n\ttry {\n\t\tconst date = new Date( rawValue );\n\t\tif ( isNaN( date.getTime() ) ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst year = date.getFullYear();\n\t\tconst month = String( date.getMonth() + 1 ).padStart( 2, '0' );\n\t\tconst day = String( date.getDate() ).padStart( 2, '0' );\n\n\t\t// Handle common format patterns\n\t\tif ( format === 'Y-m-d' || ! format ) {\n\t\t\treturn `${ year }-${ month }-${ day }`;\n\t\t}\n\t\tif ( format === 'Y' ) {\n\t\t\treturn String( year );\n\t\t}\n\t\tif ( format === 'm' ) {\n\t\t\treturn month;\n\t\t}\n\t\tif ( format === 'd' ) {\n\t\t\treturn day;\n\t\t}\n\n\t\t// Default to Y-m-d\n\t\treturn `${ year }-${ month }-${ day }`;\n\t} catch ( error ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( '[Speaking Permalinks] Date formatting error:', error );\n\t\treturn '';\n\t}\n}\n\n/**\n * Extract raw value from WordPress entity property.\n *\n * @param {*} value The value to extract from.\n * @return {string} The extracted raw value.\n */\nexport function extractRawValue( value ) {\n\tif ( ! value ) {\n\t\treturn '';\n\t}\n\n\tif ( typeof value !== 'object' || value === null ) {\n\t\treturn String( value );\n\t}\n\n\tif ( value.raw !== undefined ) {\n\t\treturn value.raw;\n\t}\n\n\tif ( value.rendered !== undefined ) {\n\t\treturn String( value.rendered ).replace( /<[^>]*>/g, '' );\n\t}\n\n\treturn String( value );\n}\n\n/**\n * Apply text formatting to a string value.\n *\n * @param {string}      stringValue The string to format.\n * @param {string|null} format      The format type ('lower', 'upper', or null).\n * @return {string} The formatted string.\n */\nexport function applyTextFormatting( stringValue, format ) {\n\tif ( ! format ) {\n\t\treturn stringValue;\n\t}\n\n\tif ( format === 'lower' ) {\n\t\treturn stringValue.toLowerCase();\n\t}\n\n\tif ( format === 'upper' ) {\n\t\treturn stringValue.toUpperCase();\n\t}\n\n\treturn stringValue;\n}\n\n/**\n * Format a value based on the field type and format specification.\n * Intelligently detects if a format is a date format and applies it accordingly.\n *\n * @param {string}      field  The field name.\n * @param {*}           value  The field value.\n * @param {string|null} format The format specification (e.g., 'Y-m-d', 'lower').\n * @param {boolean}     isMeta Whether this is a meta field.\n * @return {string} The formatted value.\n */\nexport function formatFieldValue( field, value, format, isMeta = false ) {\n\tif ( ! value ) {\n\t\treturn '';\n\t}\n\n\t// Extract raw value first\n\tconst rawValue = extractRawValue( value );\n\n\t// Check if we have a format to apply\n\tif ( ! format ) {\n\t\treturn rawValue;\n\t}\n\n\t// Detect if the format looks like a date format\n\t// Common PHP date format characters: Y, m, d, H, i, s, etc.\n\tconst isDateFormat = /[YymdHisaABgGhFjlMnStTwWzZ]/.test( format );\n\n\t// If it's explicitly a date field OR the format looks like a date format,\n\t// try to format as a date\n\tif ( field === 'date' || ( isMeta && isDateFormat ) ) {\n\t\t// For meta fields, check if the value looks like a date\n\t\tif ( isMeta && ! isDateLike( rawValue ) ) {\n\t\t\t// Value doesn't look like a date, apply text formatting instead\n\t\t\treturn applyTextFormatting( rawValue, format );\n\t\t}\n\n\t\t// Try to format as a date\n\t\tconst formattedDate = formatDateValue( rawValue, format );\n\t\tif ( formattedDate ) {\n\t\t\treturn formattedDate;\n\t\t}\n\t}\n\n\t// For text formatting options (lower, upper)\n\treturn applyTextFormatting( rawValue, format );\n}\n","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"plugins\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerPlugin } from '@wordpress/plugins';\n\nimport { DynamicSlugGenerator } from './components/DynamicSlugGenerator';\n\n/**\n * Register the Speaking Permalinks Plugin\n */\nregisterPlugin( 'speaking-permalinks', {\n\trender: DynamicSlugGenerator,\n} );\n"],"names":["useSelect","store","editorStore","SlugGeneratorCore","jsx","_jsx","DynamicSlugGenerator","postType","postId","hasSpeakingPermalinksSupport","template","select","editor","currentPostType","getCurrentPostType","postTypeObject","getPostType","supports","hasSpeakingPermalinks","templateValue","getCurrentPostId","useEffect","useRef","useMemo","useEntityProp","parseTemplateVariables","extractRequiredFields","generateSlugFromTemplate","useTaxonomyData","useTaxonomyTerms","variables","postFields","postFieldsNeeded","taxonomySlugs","taxonomySlugsNeeded","postFieldValues","getEditedPostAttribute","values","forEach","field","error","meta","taxonomyTermIds","taxonomyTerms","currentSlug","setPostSlug","lastGeneratedSlug","postFieldValuesString","JSON","stringify","postFieldValuesKey","metaString","metaKey","taxonomyTermIdsString","taxonomyTermIdsKey","taxonomyTermsString","taxonomyTermsKey","timeoutId","setTimeout","generatedSlug","current","clearTimeout","taxonomyRestBases","restBases","taxonomySlug","taxonomy","getTaxonomy","restBase","rest_base","memoizedRestBases","taxonomyTermIdsRaw","ids","termIds","rawTaxonomyTerms","terms","length","termObjects","map","id","term","getEntityRecord","filter","Boolean","slugs","slug","join","formatFieldValue","sanitizeSlug","slugParts","split","part","trim","toLowerCase","replace","match","variable","varObj","find","v","raw","isTax","value","isMeta","undefined","arrayKey","formatted","format","regex","exec","startsWith","withoutPrefix","substring","parts","fieldPart","fieldParts","push","Set","metaFields","dateI18n","isDateLike","test","valueStr","String","formatDateValue","rawValue","date","Date","isNaN","getTime","year","getFullYear","month","getMonth","padStart","day","getDate","console","extractRawValue","rendered","applyTextFormatting","stringValue","toUpperCase","isDateFormat","formattedDate","registerPlugin","render"],"ignoreList":[],"sourceRoot":""}